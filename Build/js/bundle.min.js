(()=>{function y(){const e=document.querySelector(".table").querySelector("tbody"),r=Array.from(e.querySelectorAll("tr"));r.sort(((o,a)=>{const l=o.cells[0].textContent.trim().toUpperCase(),c=a.cells[0].textContent.trim().toUpperCase();return l.localeCompare(c)})),e.innerHTML="",r.forEach((o=>{e.appendChild(o)}))}const F=document.querySelector(".table thead tr");function h(n){fetch(`/api/notepad/add/${n}`,{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{e.error?alert(e.message||"Error adding user to notepad"):"User already in notepad"===e.message?alert("User already in notepad"):alert(e.message||"User added to notepad successfully")})).catch((e=>{console.error("Error:",e)}))}function E(n){console.log("UserID:",n),fetch(`/api/notepad/remove/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{console.log(e),alert(e.message||"User removed from notepad successfully")})).catch((e=>{console.error("Error:",e),alert(e.message||"Error removing user from notepad")}))}function P(n){fetch(`/api/notepad/toggle-priority/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{console.log("Priority toggle response:",e);const r=document.getElementById(`row_${n}`);r&&r.classList.toggle("priority-row",e.priority)})).catch((e=>{console.error("Error toggling priority:",e)}))}function m(){const n=document.getElementById("genderFilter2").value;window.visibleRows.forEach((function(e){const o=e.querySelector("td:nth-child(2)").textContent;e.style.display=""===n||o===n?"":"none"}))}function I(){const n=document.getElementById("prevButton"),e=document.getElementById("nextButton"),r=document.getElementById("currentPage"),o=document.getElementById("totalPages"),a=document.getElementById("filterForm");let l=parseInt(r.textContent);const c=parseInt(o.textContent);function s(){const t=document.getElementById("genderFilter");return t?t.value:""}function d(){const t=document.getElementById("searchInput");return t?t.value:""}function g(){const t=document.getElementById("searchInputPrefix");return t?t.value:""}function u(){const t=document.getElementById("searchInputSuffix");return t?t.value:""}function i(){const t=document.getElementById("searchInputNoPrefix");return t?t.value:""}function f(){const t=document.getElementById("searchInputNoSuffix");return t?t.value:""}function p(){const t=document.getElementById("syllablesInputFilter");return t?t.value:""}console.log("Initial currentPage:",l),console.log("Initial totalPages:",c),document.getElementById("resetButton").addEventListener("click",(function(){const t=document.getElementById("filterForm");t.reset(),t.dispatchEvent(new Event("submit"))})),n.addEventListener("click",(()=>{l>1&&(l--,x(l,s(),d(),g(),u(),i(),f(),p()))})),e.addEventListener("click",(()=>{l<c&&(l++,x(l,s(),d(),g(),u(),i(),f(),p()))})),a.addEventListener("submit",(t=>{t.preventDefault(),console.log("Form submitted"),l=1,x(l,s(),d(),g(),u(),i(),f(),p())}))}function x(n,e,r,o,a,l,c,s){const d=document.getElementById("limitInput").value,u=`/api/users/filter?page=${n}&gender=${e}&search=${r}&searchPrefix=${o}&searchSuffix=${a}&searchNoPrefix=${l}&searchNoSuffix=${c}&syllables=${s}${d?`&limit=${d}`:""}`;console.log("Fetching URL:",u),fetch(u).then((i=>i.json())).then((i=>{!function(n){const e=n.users,r=n.currentPage,o=n.totalPages;console.log("Updated currentPage:",r),console.log("Updated totalPages:",o);const a=document.querySelector(".table tbody");a.innerHTML="",e.forEach((s=>{const d=`<tr>\n                        <td>${s.vorname}</td>\n                        <td>${s.geschlecht}</td>\n                        <td>\n                            <a class="btn box-effect add" onclick="addToNotepad('${s._id}')">\n                                <span class="colorful-text">\n                                    <i class="fas fa-user-plus" title="in den Merkzettel eintragen"></i>\n                                </span>\n                            </a>\n                        </td>\n                    </tr>`;a.innerHTML+=d}));const l=document.getElementById("currentPage"),c=document.getElementById("totalPages");l.textContent=r,c.textContent!==o.toString()&&(c.textContent=o)}(i)})).catch((i=>console.error("Error updating page:",i)))}F&&F.addEventListener("click",y),window.addToNotepad=h,window.removeFromNotepad=E,window.togglePriority=P,document.addEventListener("DOMContentLoaded",(function(){window.visibleRows=Array.from(document.querySelectorAll(".table tbody tr")),document.getElementById("genderFilter2").addEventListener("change",m),m()})),I(),console.log("Hallo utils.js"),y(),console.log("Grüße library.js"),document.addEventListener("DOMContentLoaded",(function(){window.visibleRows=Array.from(document.querySelectorAll(".table tbody tr")),I(),document.getElementById("genderFilter2").addEventListener("change",m),m(),document.addEventListener("click",(function(e){const r=e.target;if(r.classList.contains("add")){h(r.getAttribute("data-id"))}else if(r.classList.contains("remove")){E(r.getAttribute("data-id"))}else if(r.classList.contains("priority")){P(r.getAttribute("data-id"))}}))}))})();