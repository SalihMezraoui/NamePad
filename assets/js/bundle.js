(() => {
  function B () { console.log('Hallo utils.js'); } function y () { const e = document.querySelector('.table').querySelector('tbody'); const r = Array.from(e.querySelectorAll('tr')); r.sort((o, a) => { const l = o.cells[0].textContent.trim().toUpperCase(); const c = a.cells[0].textContent.trim().toUpperCase(); return l.localeCompare(c); }), e.innerHTML = '', r.forEach(o => { e.appendChild(o); }); } const F = document.querySelector('.table thead tr'); F && F.addEventListener('click', y); function S () { console.log('Gr\xFC\xDFe library.js'); } function h (n) { fetch(`/api/notepad/add/${n}`, { method: 'POST', headers: { 'Content-Type': 'application/json' } }).then(e => e.json()).then(e => { e.error ? alert(e.message || 'Error adding user to notepad') : e.message === 'User already in notepad' ? alert('User already in notepad') : alert(e.message || 'User added to notepad successfully'); }).catch(e => { console.error('Error:', e); }); }window.addToNotepad = h; function E (n) { console.log('UserID:', n), fetch(`/api/notepad/remove/${n}`, { method: 'DELETE', headers: { 'Content-Type': 'application/json' } }).then(e => e.json()).then(e => { console.log(e), alert(e.message || 'User removed from notepad successfully'); }).catch(e => { console.error('Error:', e), alert(e.message || 'Error removing user from notepad'); }); }window.removeFromNotepad = E; function P (n) { fetch(`/api/notepad/toggle-priority/${n}`, { method: 'PUT', headers: { 'Content-Type': 'application/json' } }).then(e => e.json()).then(e => { console.log('Priority toggle response:', e); const r = document.getElementById(`row_${n}`); r && r.classList.toggle('priority-row', e.priority); }).catch(e => { console.error('Error toggling priority:', e); }); }window.togglePriority = P; function m () { const n = document.getElementById('genderFilter2').value; window.visibleRows.forEach(function (e) { const o = e.querySelector('td:nth-child(2)').textContent; n === '' || o === n ? e.style.display = '' : e.style.display = 'none'; }); }document.addEventListener('DOMContentLoaded', function () { window.visibleRows = Array.from(document.querySelectorAll('.table tbody tr')), document.getElementById('genderFilter2').addEventListener('change', m), m(); }); function I () { const n = document.getElementById('prevButton'); const e = document.getElementById('nextButton'); const r = document.getElementById('currentPage'); const o = document.getElementById('totalPages'); const a = document.getElementById('filterForm'); let l = parseInt(r.textContent); const c = parseInt(o.textContent); console.log('Initial currentPage:', l), console.log('Initial totalPages:', c); function s () { const t = document.getElementById('genderFilter'); return t ? t.value : ''; } function d () { const t = document.getElementById('searchInput'); return t ? t.value : ''; } function g () { const t = document.getElementById('searchInputPrefix'); return t ? t.value : ''; } function u () { const t = document.getElementById('searchInputSuffix'); return t ? t.value : ''; } function i () { const t = document.getElementById('searchInputNoPrefix'); return t ? t.value : ''; } function f () { const t = document.getElementById('searchInputNoSuffix'); return t ? t.value : ''; } function p () { const t = document.getElementById('syllablesInputFilter'); return t ? t.value : ''; } function C () { const t = document.getElementById('filterForm'); t.reset(), t.dispatchEvent(new Event('submit')); }document.getElementById('resetButton').addEventListener('click', C), n.addEventListener('click', () => { l > 1 && (l--, x(l, s(), d(), g(), u(), i(), f(), p())); }), e.addEventListener('click', () => { l < c && (l++, x(l, s(), d(), g(), u(), i(), f(), p())); }), a.addEventListener('submit', t => { t.preventDefault(), console.log('Form submitted'), l = 1, x(l, s(), d(), g(), u(), i(), f(), p()); }); } function x (n, e, r, o, a, l, c, s) { const d = document.getElementById('limitInput').value; const g = d ? `&limit=${d}` : ''; const u = `/api/users/filter?page=${n}&gender=${e}&search=${r}&searchPrefix=${o}&searchSuffix=${a}&searchNoPrefix=${l}&searchNoSuffix=${c}&syllables=${s}${g}`; console.log('Fetching URL:', u), fetch(u).then(i => i.json()).then(i => { b(i); }).catch(i => console.error('Error updating page:', i)); } function b (n) {
    const e = n.users; const r = n.currentPage; const o = n.totalPages; console.log('Updated currentPage:', r), console.log('Updated totalPages:', o); const a = document.querySelector('.table tbody'); a.innerHTML = '', e.forEach(s => {
      const d = `<tr>
                        <td>${s.vorname}</td>
                        <td>${s.geschlecht}</td>
                        <td>
                            <a class="btn box-effect add" onclick="addToNotepad('${s._id}')">
                                <span class="colorful-text">
                                    <i class="fas fa-user-plus" title="in den Merkzettel eintragen"></i>
                                </span>
                            </a>
                        </td>
                    </tr>`;a.innerHTML += d;
    }); const l = document.getElementById('currentPage'); const c = document.getElementById('totalPages'); l.textContent = r, c.textContent !== o.toString() && (c.textContent = o);
  }I(); B(); y(); S(); document.addEventListener('DOMContentLoaded', function () { window.visibleRows = Array.from(document.querySelectorAll('.table tbody tr')), I(), document.getElementById('genderFilter2').addEventListener('change', m), m(), document.addEventListener('click', function (e) { const r = e.target; if (r.classList.contains('add')) { const o = r.getAttribute('data-id'); h(o); } else if (r.classList.contains('remove')) { const o = r.getAttribute('data-id'); E(o); } else if (r.classList.contains('priority')) { const o = r.getAttribute('data-id'); P(o); } }); });
})();
